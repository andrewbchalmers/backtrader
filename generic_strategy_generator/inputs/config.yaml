# Generic Strategy Generator Configuration

# Data Settings
data:
  source: "yahoo"  # yahoo, csv, database
  start_date: "2024-01-01"
  end_date: "2026-01-01"
  data_dir: "data/historical"

# Stock Classification Settings
# Classifies stocks by behavior (trending, mean-reverting, volatile, etc.)
# to match them with appropriate strategy types
classification:
  # Enable classification (use --classify flag to run)
  enabled: true

  # Lookback period for calculating metrics (trading days)
  lookback_days: 252  # 1 year

  # Whether to strictly match strategies to stock pools
  # If false, unmatched strategies will still run on all stocks
  # Set to true for focused testing (recommended when using --stock-behavior)
  strict_matching: true

  # Classification thresholds
  thresholds:
    # Trend behavior (ADX-based)
    # Balanced settings: allows meaningful "mixed" category for stocks
    # that exhibit both trending and mean-reverting behavior
    adx_trending: 27        # ADX > 27 = trending
    adx_mean_reverting: 22  # ADX < 22 = mean reverting

    # Volatility (ATR as % of price)
    atr_pct_high: 3.0       # ATR% > 3% = high volatility
    atr_pct_low: 1.5        # ATR% < 1.5% = low volatility

    # Breakout propensity (% of days with Donchian breakouts)
    breakout_freq_high: 0.15  # > 15% = breakout prone
    breakout_freq_low: 0.05   # < 5% = range bound

    # Price tiers
    price_low: 20           # < $20 = low price stock
    price_high: 100         # > $100 = high price stock

    # Movement intensity (avg daily return magnitude %)
    movement_high: 2.0      # > 2% = high beta-like
    movement_low: 0.8       # < 0.8% = low beta-like

    # Liquidity (avg daily dollar volume in millions)
    liquidity_high: 100     # > $100M = high liquidity
    liquidity_low: 10       # < $10M = low liquidity

# Backtest Settings
backtest:
  initial_capital: 100000
  commission: 0.001  # 0.1%
  slippage: 0.0005   # 0.05%
  position_size: 0.95  # Use 95% of capital per trade

# Strategy Generation
strategy:
  # Entry condition types: crossover, threshold, breakout
  entry_types: ["crossover", "threshold", "breakout"]
  # Exit condition types: crossover, stop_loss, take_profit, trailing_stop
  exit_types: ["crossover", "stop_loss", "take_profit"]
  # Maximum combinations to test (0 = unlimited)
  max_combinations: 0

  # Risk management variations
  risk_management:
    # Test different risk management combinations
    # "none" = exit indicator only
    # "stop_loss" = exit indicator + stop loss
    # "take_profit" = exit indicator + take profit
    # "both" = exit indicator + stop loss + take profit
    variations: ["none", "stop_loss", "take_profit", "both"]
    # Stop loss percentages to test
    stop_loss_pcts: [0.05, 0.1]  # 2%, 5%
    # Take profit percentages to test
    take_profit_pcts: [0.08, 0.1, 0.13]  # 4%, 8%

# Performance Filters (minimum requirements)
filters:
  min_trades: 10
  max_drawdown: 0.50  # 50% - relaxed
  min_sharpe: 0.0  # Allow negative - just to see results
  min_profit_factor: 0.8  # Relaxed
  min_win_rate: 0.3  # Relaxed to 20%

# Optimization Settings
optimization:
  # Scoring weights (must sum to 1.0)
  weights:
    total_return: 0.25
    sharpe_ratio: 0.20
    max_drawdown: 0.20
    profit_factor: 0.15
    win_rate: 0.10
    recovery_factor: 0.10

  # Top N strategies to export
  top_n: 100

  # Enable multi-objective optimization (Pareto frontier)
  pareto_optimization: true

# Execution Settings
execution:
  parallel_workers: 4
  save_interval: 100  # Save results every N strategies
  verbose: true

# Output Settings
output:
  database: "results/strategies.db"
  top_strategies_csv: "results/top_strategies.csv"
  reports_dir: "results/reports"
  generate_plots: true
  plot_top_n: 10